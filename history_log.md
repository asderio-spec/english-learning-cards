# 개발 히스토리 로그 📝

**프로젝트**: 영어 학습 카드 앱  
**기간**: 2025년 1월 8일  
**최종 버전**: v1.0 ✅

## 🚨 주요 시행착오 및 해결책

### 1. framer-motion 라이브러리 충돌 문제

**문제**: 
```
Invalid hook call. Hooks can only be called inside of the body of a function component.
Cannot read properties of null (reading 'useContext')
```

**원인**: framer-motion 라이브러리와 React 버전 충돌

**해결책**: 
- ❌ 시도했지만 실패: framer-motion 버전 다운그레이드
- ❌ 시도했지만 실패: React 버전 업그레이드  
- ✅ **최종 해결**: 모든 외부 애니메이션 라이브러리 제거하고 CSS 애니메이션으로 대체

**교훈**: 외부 라이브러리 의존성을 최소화하고, 네이티브 CSS 애니메이션 사용 권장

---

### 2. 진도 추적 기능 구현 문제

**문제**: 
- 카드를 봐도 진도가 추적되지 않음
- 진도 바가 표시되지 않음
- 대시보드에서 "본 카드" 수가 0으로 표시

**원인**: 
- `viewedCards` 상태가 선언되었지만 실제로 업데이트되지 않음
- 카드 네비게이션 함수에서 진도 추적 로직 누락

**해결책**:
```typescript
// 모든 카드 네비게이션 함수에 진도 추적 로직 추가
const handleNext = () => {
  if (sentences[currentIndex]) {
    setViewedCards(prev => new Set([...prev, sentences[currentIndex].id]));
  }
  // ... 기존 로직
};

// 현재 카드 자동 추적
useEffect(() => {
  if (sentences[currentIndex]) {
    setViewedCards(prev => new Set([...prev, sentences[currentIndex].id]));
  }
}, [currentIndex, sentences]);
```

**교훈**: 상태 업데이트 로직을 모든 관련 함수에 일관되게 적용해야 함

---

### 3. sentences.ts 파일 데이터 손실 문제

**문제**: 
- 학년별로 100개 문장이 있어야 하는데 적은 수만 표시
- 일부 학년에서 7개 문장만 표시
- sentences.ts 파일이 비어있거나 손상됨

**원인**: 
- 파일 수정 과정에서 데이터 손실
- 브라우저 캐시 문제
- 모듈 import/export 문제

**해결책**:
1. sentences.ts 파일 완전 재생성
2. 각 학년별로 정확히 100개 문장 확보
3. Array.from을 사용한 동적 생성으로 안정성 확보

**교훈**: 중요한 데이터 파일은 백업을 유지하고, 동적 생성 로직으로 안정성 확보

---

### 4. 컴포넌트 파일 버전 관리 혼란

**문제**: 
- App_minimal_linear.tsx, App_clean.tsx, App_final.tsx 등 여러 버전 존재
- 어떤 파일이 실제로 사용되는지 혼란
- main.tsx에서 잘못된 파일 import

**원인**: 
- 반복적인 수정 과정에서 여러 버전 파일 생성
- 명확한 버전 관리 부재

**해결책**:
1. main.tsx에서 정확한 파일 import 확인
2. 사용하지 않는 파일들을 old 폴더로 이동
3. 명확한 파일명 규칙 적용

**교훈**: 버전 관리를 명확히 하고, 사용하지 않는 파일은 즉시 정리

---

### 5. 디자인 시스템 의존성 문제

**문제**: 
- Linear 디자인 시스템 컴포넌트 import 오류
- BreakpointKey export 문제
- 복잡한 의존성 체인

**원인**: 
- 디자인 시스템과 메인 앱 간의 복잡한 의존성
- TypeScript import/export 문제

**해결책**:
- 디자인 시스템 의존성을 완전히 제거
- CSS-in-JS 인라인 스타일로 대체
- 독립적인 컴포넌트 구조 구축

**교훈**: 복잡한 의존성보다는 단순하고 독립적인 구조가 안정적

---

## 🎯 성공 요인

### 1. 단순한 아키텍처
- 외부 라이브러리 의존성 최소화
- React 기본 기능만 사용
- 인라인 스타일로 스타일링 단순화

### 2. 점진적 개발
- 기본 기능부터 차근차근 구현
- 각 기능별로 테스트 후 다음 단계 진행
- 문제 발생 시 즉시 해결

### 3. 명확한 상태 관리
- useState를 사용한 단순한 상태 관리
- 상태 업데이트 로직의 일관성 유지
- 사이드 이펙트 최소화

### 4. 사용자 중심 설계
- 직관적인 UI/UX
- 키보드 단축키 지원
- 실시간 피드백 제공

---

## 🚫 피해야 할 실수

1. **외부 라이브러리 남용**: 특히 애니메이션 라이브러리
2. **복잡한 의존성 체인**: 단순한 구조가 최고
3. **상태 업데이트 누락**: 모든 관련 함수에 일관되게 적용
4. **파일 버전 관리 소홀**: 명확한 네이밍과 정리 필요
5. **데이터 백업 부재**: 중요 데이터는 항상 백업 유지

---

## 📚 학습한 베스트 프랙티스

1. **KISS 원칙**: Keep It Simple, Stupid
2. **점진적 개발**: 작은 단위로 나누어 개발
3. **즉시 테스트**: 기능 구현 후 바로 테스트
4. **명확한 네이밍**: 파일명과 함수명을 명확하게
5. **의존성 최소화**: 꼭 필요한 것만 사용

---

## 🔄 반복 패턴

### 문제 발생 → 원인 분석 → 해결책 시도 → 테스트 → 성공/실패 판단

이 패턴을 통해 최종적으로 안정적인 v1.0을 완성할 수 있었습니다.

---

**작성일**: 2025년 1월 8일  
**작성자**: Kiro AI Assistant  
**목적**: 향후 유사한 프로젝트에서 같은 실수 방지